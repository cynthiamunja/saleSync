

# 1️⃣ **User & Authentication Module**

**Routes:**

* `/registerCashier` → anyone can register a cashier (maybe via admin portal)
* `/adminCreateUser` → admin-only user creation
* `/managerCreateUser` → manager-only user creation
* `/login` → login for all users

**Roles:**

* **Admin:** Full control over system and user management
* **Manager:** Partial control, mostly operational
* **Cashier:** Limited, mainly sales
* Users are authorized with `authorize([roles])` middleware

**User Management:**

* Admin/Manager can:

  * Activate/deactivate users
  * Update user details
  * Search users
* Managers specifically handle cashiers (activate, deactivate, update)
* Cashiers can mostly view themselves and their own sales

---

# 2️⃣ **Categories Module**

**Routes:**

* `/createCategory` → Admin/Manager
* `/getAllCategories` → Any authorized user
* `/getOneCategory/:id` → Any authorized user
* `/updateCategory/:id`, `/deactivateCategory/:id`, `/activateCategory/:id` → Admin/Manager
* `/searchCategories` → All authorized users

**Purpose:**
Categorize products (e.g., medicines, supplements). Admins/managers control creation and updates. Everyone can view/search categories.

---

# 3️⃣ **Products Module**

**Routes:**

* `/createProduct` → Admin/Manager
* `/updateProduct/:id` → Manager
* `/updateStock/:id` → Manager
* `/deactivateProduct/:id`, `/activateProduct/:id` → Admin/Manager
* `/getProducts`, `/getProductById/:id`, `/searchProducts` → All authorized

**Purpose:**

* Products have **stock, price, costPrice, category**.
* Admin can create or deactivate.
* Manager can update stock and edit product details.
* Cashiers **cannot modify products**, only view for sales.
* Fully role-based access.

---

# 4️⃣ **Sales Module**

**Routes:**

* `/createSale` → Cashiers only
* `/my-sales` → Cashiers (view own sales)
* `/getAllSales`, `/getActiveSales` → Admin/Manager
* `/deactivateSale/:id` → Admin/Manager (soft delete)

**Purpose:**

* Track all sales.
* Reduce product stock automatically when a sale is made.
* Admin/Manager can audit and manage sales, including filtering by cashier or date.

---

# 5️⃣ **Reports Module**

**Routes:**

* Daily revenue: `/DailyRevenue` → any authorized
* Monthly summary & breakdown: `/monthSalesSummary`, `/MonthlyBreakdown` → Admin/Manager
* Profit reports: `/ProfitReport` → Admin/Manager
* Top-selling products: `/TopSellingProducts` → Admin/Manager
* Yearly summary: `/getYearlySummary` → Admin/Manager
* Sales by payment method: `/SalesByPaymentMethod` → Admin/Manager
* Export sales: `/exportSalesToExcel`, `/exportSalesToPDF` → Admin/Manager

**Purpose:**

* Analyze sales and revenue at daily, monthly, and yearly levels.
* Track profits (cost vs selling price).
* Export data for reporting.
* Only higher roles (Admin/Manager) can view full reports; cashiers can only view their sales.

---

# 6️⃣ **System Flow & Role Responsibilities**

| Module     | Admin                      | Manager                | Cashier                     |
| ---------- | -------------------------- | ---------------------- | --------------------------- |
| Users      | Full create/update         | Manage cashiers        | View self only              |
| Categories | Create/Update/Activate     | Create/Update/Activate | View/Search                 |
| Products   | Create/Activate/Deactivate | Update/Stock           | View only                   |
| Sales      | View/Deactivate/Filter     | View/Deactivate/Filter | Create/View Own             |
| Reports    | All reports + export       | All reports + export   | Only personal sales summary |

---

# 7️⃣ **Key Features**

* **Role-based access control** enforced via middleware.
* **Product stock management**: stock reduces automatically on sale.
* **Soft delete** for sales, products, and users.
* **Revenue & profit tracking** with daily/monthly/yearly breakdown.
* **Export functionality** for PDF/Excel.
* **Cashiers only handle sales**, not inventory or product creation.
* **Managers** bridge admin policies and cashier operations.
* **Admins** are superusers with full system control.

